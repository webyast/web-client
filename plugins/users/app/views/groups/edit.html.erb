<%= javascript_include_tag "group_members.js" %>

  <style type="text/css">
    label.error {
         display: none; color: red; padding-left: 11.5em; padding-bottom: 1.5em; margin-top: -0.5em; text-align: left; vertical-align: top; width: 50%
    }

    .GContainerUser, .GContainerGroups {
        float: left;
        margin: 3px;
        border: #669999 2px solid;
        padding: 5px;
     }
     .GBox {
        border: #000 1px solid;
        cursor: pointer;
	display: block;
	float: left;
        font-family: verdana, tahoma, arial;
        font-size: 10px;
        margin-bottom: 5px;
        padding: 2px;
        width: 94px;
     }
     #ContainerUser .GBox {
        background-color: #eee;
     }
  </style>

<%
 disabled = ! ((@permissions[:groupadd] && @adding) || (@permissions[:groupmodify] && !@adding)) %>
<div class='plugin-icon'><img src='/icons/yast-groups.png' alt="groups module"/>
  <%=_("Groups") + header_spacer %>
  <%= if @adding
         _("Add new group")
      else
         _("Modify group")
      end %>
</div>

<div class="plugin-content grid_12">

<%= render :partial => 'shared/missing_write_permissions' if disabled %>

<% form_for :group, :url => { :action => @adding ? "create" : "update"}, :html => { :id => "groupForm", :autocomplete => :off}  do |f| %>
  <%= f.error_messages %>
  <%= f.hidden_field :old_cn %>

  <fieldset>
    <p>
      <label><%=_("Group Name")%></label>
      <%= f.text_field :cn, :disabled => false %>
    </p>
    <p>
      <label><%=_("Group ID")%></label>
      <%= f.text_field :gid, :disabled => false %>
    </p>
     <p>
      <label><%=_("Group Type")%></label>
      <%= f.text_field :group_type, :disabled => true %>
      <%= f.hidden_field :group_type %>
    </p>
    <p>
      <label><%=_("Default members")%></label>
      <%= f.text_field :default_members_string, :disabled => true %>
    </p>
    <p>
      <label><%=_("Members")%></label>
      <%= f.text_field :members_string, :disabled => false %>
      <a href="#" class="button" onClick="open_users_dialog();return false;">Manage Memebers</a>
    </p>
  </fieldset>

  <div id="members" style="display:none;" title="Members">
     <div>
      <div class="GContainerUser" style="width: 100px;" id="ContainerUser" onclick="moveItem(event,'ContainerGroups');"> </div>
      <div class="GContainerGroups" style="width: 400px;" id="ContainerGroups" onclick="moveItem(event,'ContainerUser');"> </div>
     </div>
  </div>

  <fieldset>
    <%= form_cancel_button :action => :index %>
    <%= form_str_spacer %>
    <%= form_next_button %>
  </fieldset>

<% end %>
    <div><input type="hidden" id="all_users_string" value="<%= @all_users_string %>" /></div>
</div>
