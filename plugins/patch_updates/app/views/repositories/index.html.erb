<% if @permissions and @repos %>

  <div class='plugin-icon'><img src='/icons/yast-online_update.png'/><%=_("Software Repositories") %></div>
  <div class='plugin-content grid_12'>
  <div class="loading"></div>
  <% disabled = !@permissions[:write] %>
  <% if @repos.empty? %>
    <h3><%=_("No software repository configured.") %></h3>
  <% else %>
    <h3><%=_("Configured software repositories") %></h3>
      <table cellpadding="3px" class="alternate-rows">
	<tr>
	  <th>Enabled</th>
	  <th>Alias</th>
	  <th>Name</th>
	  <th>URL</th>
	</tr>
      <% @repos.each do |r| %>
	<tr>
	  <td align="center"><input type="checkbox" <%= r.enabled ? ' checked' : '' -%> <%= disabled ? 'disabled' : '' -%> /></td>
	  <td><%= link_to (h r.id), :action => 'show', :id => r.id -%></td>
	  <td><%= link_to (h r.name), :action => 'show', :id => r.id -%></td>
	  <td><%= h r.url -%></td>
	  <% unless disabled -%>
	    <td><%= link_to image_tag('/images/delete.png', :alt => "delete"),
	      {:action => 'delete', :id => r.id},
	      {:confirm => _("Really delete repository '%s'?") % h(r.id), :method => :delete} %>
	    </td>
	  <% end -%>
	</tr>
      <% end  %>
      </table>
  <% end %>

  <br>
  <%= link_to _("Back"), '/', :class=>"button", :onclick=>"$('#progress').show()" %>

  <% if !disabled %>
    <%= link_to _("Add"), {:action => 'add'}, :class=>"button", :onclick=>"$('#progress').show()" %> <%= _("a new repository") %>
  <% end %>

  </div>

<% end %>

